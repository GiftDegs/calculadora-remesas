<!DOCTYPE html>
<html lang="es" class="transition duration-300">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Cambios</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script>
    tailwind.config = { darkMode: 'class' };
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="app.js" defer></script>
  <style>
    .tasa-shine { position: relative; overflow: hidden; }
    @keyframes pulseEpic { 0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:0.95} }
    .pulse-epic { animation: pulseEpic 1.5s ease-in-out infinite; }
    .tasa-shine::before {
      content: ""; position: absolute; top: -50%; left: -50%;
      width: 200%; height: 200%;
      background: linear-gradient(120deg, rgba(255,255,255,0) 40%, rgba(255,255,255,0.3) 50%, rgba(255,255,255,0) 60%);
      transform: rotate(25deg); animation: shine 2.5s infinite; pointer-events: none;
    }
    @keyframes shine { from{transform:translateX(-100%) rotate(25deg)} to{transform:translateX(100%) rotate(25deg)} }
    body { font-family: 'Poppins', sans-serif; }
    @keyframes ripple { to { transform: scale(4); opacity: 0; } }
    .ripple-button { position: relative; overflow: hidden; }
    .ripple-button span {
      position: absolute; border-radius: 50%;
      transform: scale(0); background: rgba(255,255,255,0.4);
      animation: ripple 0.6s linear; pointer-events: none;
    }
    .fade-in { animation: fadeIn 0.5s ease-in-out forwards; }
    .fade-scale-in { animation: fadeScale 0.5s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeScale { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }
  </style>
</head>
<body class="bg-gradient-to-b from-[#EAF6FF] via-pink-50 to-pink-100 text-gray-800 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 dark:text-gray-100 transition-all duration-300">
  <div class="flex flex-col items-center px-4 py-6 min-h-screen gap-8">
    <div class="absolute top-2 right-2 z-10">
      <button id="toggleDark" class="bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-100 px-2 sm:px-3 py-1 rounded-md shadow-md text-xs sm:text-sm">🌗 Modo</button>
    </div>

    <header class="flex flex-col items-center">
      <img src="logo.png" alt="Logo ByteTransfer" class="h-24 mb-4" />
      <h1 class="font-bold text-[#0066FF] dark:text-[#66AAFF] text-center whitespace-nowrap overflow-hidden text-ellipsis max-w-full text-2xl sm:text-3xl md:text-4xl">
        Calculadora de Cambios
      </h1>
      <p class="text-lg text-[#666666] dark:text-gray-300 text-center -mt-1">De Argentina a Venezuela</p>
    </header>

    <div id="tasaWrap" class="flex flex-col items-center transition-all duration-300">
      <p id="tasaTitulo" class="text-base font-semibold text-gray-700 dark:text-gray-300">Tasa del día</p>
      <p id="tasaFecha" class="text-sm italic text-[#666666] dark:text-gray-400">—</p>
      <div id="tasaCard" class="tasa-shine mt-2 w-48 h-48 flex items-center justify-center rounded-2xl bg-[#E1F0FF]/80 dark:bg-white/10 backdrop-blur-md ring-1 ring-black/5 shadow-[0_8px_20px_rgba(0,0,0,0.12)] transition-all duration-300 relative">
        <span id="tasaValue" class="text-6xl font-extrabold text-blue-900 dark:text-blue-300 tracking-tight drop-shadow-lg select-none transition-all duration-300 pulse-epic">–</span>
        <span id="tasaConfirmacion" class="absolute bottom-2 text-green-600 text-sm font-medium hidden">Tasa actualizada ✅</span>
      </div>
    </div>

    <section id="step1" class="flex flex-col items-center gap-4 text-center">
      <h2 class="text-xl font-semibold">¿Qué quieres calcular?</h2>
      <button id="btnEnviar" class="ripple-button bg-white dark:bg-gray-100 border border-[#0066FF] text-[#0066FF] font-semibold px-6 py-3 rounded-xl shadow transition hover:scale-105">¿Cuánto recibiré en bolívares?</button>
      <button id="btnLlegar" class="ripple-button bg-white dark:bg-gray-100 border border-[#0066FF] text-[#0066FF] font-semibold px-6 py-3 rounded-xl shadow transition hover:scale-105">¿Cuántos pesos necesito enviar?</button>
      <button id="btnUpdate" class="text-sm text-[#0066FF] hover:underline mt-1 dark:text-blue-300">🔁 Actualizar tasa manualmente</button>
    </section>

    <section id="step2" class="hidden flex flex-col items-center gap-4">
      <p id="preguntaMonto" class="text-lg font-semibold text-gray-800 dark:text-white opacity-0 translate-y-4 transition-all duration-300"></p>
      <p id="errorMonto" class="text-[#FF0000] font-semibold hidden transition-all duration-300"></p>
      <input id="inputMonto" type="text" inputmode="decimal" placeholder="Ingresa el monto"
        class="w-72 text-center text-2xl font-semibold px-6 py-4 rounded-xl border border-blue-300 shadow bg-white/60 text-gray-800 placeholder-gray-400 dark:bg-gray-100 dark:text-gray-800 dark:placeholder-gray-600 backdrop-blur-md focus:outline-none focus:ring-2 focus:ring-blue-300 transition" />
      <div class="flex gap-4">
        <button id="btnVolverPaso1" class="bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-4 py-2 rounded-xl">← Volver</button>
        <button id="btnCalcular" class="bg-gradient-to-r from-[#0066FF] to-purple-600 text-white px-6 py-2 rounded-xl shadow hover:scale-105 transition-all">Calcular</button>
      </div>
    </section>

    <section id="calculando"
      class="hidden fixed inset-0 z-50 flex items-center justify-center bg-white/80 dark:bg-black/70 backdrop-blur-md animate-pulse text-2xl font-semibold text-gray-800 dark:text-gray-100">
      ⏳ Calculando...
    </section>

    <section id="resultado" class="hidden flex flex-col items-center gap-6">
      <div id="resTextContainer" class="relative bg-white text-gray-800 dark:bg-white rounded-xl px-6 py-8 shadow-lg flex flex-col items-center gap-4 w-full max-w-md">
        <button id="btnCompartir" title="Compartir"
                class="absolute top-2 right-2 w-8 h-8 p-1 bg-white/90 hover:bg-blue-100 rounded-full shadow-md transition">
          <img src="7f4abb75-d593-49bc-b2bc-617fd11d264f.png" alt="Compartir" class="w-full h-full object-contain" />
        </button>
        <img src="logo.png" alt="Logo ByteTransfer" class="h-12">
        <div id="resText" class="text-center text-xl sm:text-2xl font-semibold leading-relaxed"></div>
        <p class="text-sm text-gray-400 italic mt-4">Powered by ByteTransfer</p>
      </div>
      <div class="flex flex-col gap-3">
        <button id="btnRecalcular" class="bg-gray-200 dark:bg-gray-600 text-gray-800 dark:text-white px-5 py-2 rounded-lg shadow">🔁 Calcular otro</button>
        <button id="btnWhats" class="bg-[#25D366] text-white px-6 py-3 rounded-lg shadow hover:bg-green-700">📤 Proceder por WhatsApp</button>
      </div>
    </section>

    <audio id="soundSuccess"
           src="https://cdn.pixabay.com/download/audio/2022/10/03/audio_a69f47a883.mp3"
           preload="auto"></audio>
  </div>
</body>
</html>
